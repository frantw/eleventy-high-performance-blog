<!DOCTYPE html><html domain="frannn.dev" ga-id="UA-102201439-3" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><link href="/img/favicon/apple-touch-icon.png?hash=d2bab3fe11" rel="apple-touch-icon" sizes="180x180"><link href="/img/favicon/favicon-192x192.png?hash=b365a9bb9c" rel="icon" sizes="192x192" type="image/png"><link href="/img/favicon/favicon-32x32.png?hash=8c6aa913da" rel="icon" sizes="32x32" type="image/png"><link href="/img/favicon/favicon-16x16.png?hash=a904958e48" rel="icon" sizes="16x16" type="image/png"><link href="/favicon.svg" rel="preload" as="image"><link href="/img/icons/light-mode.svg" rel="preload" as="image"><link href="/img/icons/dark-mode.svg" rel="preload" as="image"><meta content="#f9c412" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>離開 Hexo，使用 Eleventy 架設部落格</title><meta content="離開 Hexo，使用 Eleventy 架設部落格" property="og:title"><meta content="棄用了過去的 Hexo 建置方式，改為使用 Eleventy (11ty) 來架設技術部落格的一些心得分享" name="description"><meta content="棄用了過去的 Hexo 建置方式，改為使用 Eleventy (11ty) 來架設技術部落格的一些心得分享" property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@" name="twitter:site"><meta content="@" name="twitter:creator"><meta content="https://frannn.dev/img/remote/ZHScKt.png" property="og:image"><link href="https://frannn.dev/posts/82901432/" rel="canonical"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="Fran"><link href="/" rel="preconnect" crossorigin=""><link href="https://www.googletagmanager.com" rel="preconnect" crossorigin=""><link href="https://www.googletagmanager.com" rel="dns-prefetch"><link href="https://giscus.app" rel="preconnect" crossorigin=""><link href="https://giscus.app" rel="dns-prefetch"><script defer="" src="/js/min.js?hash=c875b20c8d" async=""></script><script defer="" src="https://www.googletagmanager.com/gtag/js?id=UA-102201439-3" async=""></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-102201439-3');</script><script csp-hash="sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #41bcc2;--primary-dark: #287b7f;--accent-light: #fad24c;--accent-dark: #919693;--shade: #aec0c0;--shade-light: #f6f8f8;--shade-dark: #3a3c57;--btn-default: #999999;--btn-primary: #43bcc3;--btn-info: #3a3c57;--btn-success: #49b373;--btn-warning: #c7a33b;--btn-danger: #f44336;--btn-text: #ffffff;--border: var(--shade);--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{z-index:1;position:fixed;top:0;left:0;width:100vw;max-width:100%;padding:.575em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right;display:flex;justify-content:center}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}.dark-mode,.light-mode{--highlight: var(--accent-light)}.light-mode{--text: var(--shade-dark);--background: var(--shade-light);--anchor: var(--primary-dark);--desc: var(--accent-dark);--badge: var(--btn-primary);--tag: var(--btn-text);--code: #a84caa;--full-screen: #f8fafa}.dark-mode{--text: var(--shade-light);--background: #282a3c;--anchor: var(--accent-light);--desc: var(--shade);--badge: #f8bc0c;--tag: var(--shade-dark);--code: #45c8ce;--full-screen: var(--shade-dark)}@media (prefers-color-scheme:light){:root{--text: var(--shade-dark);--background: var(--shade-light);--anchor: var(--primary-dark);--desc: var(--accent-dark);--highlight: var(--accent-light);--badge: var(--btn-primary);--tag: var(--btn-text);--code: #a84caa;--full-screen: var(--btn-text)}}@media (prefers-color-scheme:dark){:root{--text: var(--shade-light);--background: #282a3c;--anchor: var(--accent-light);--desc: var(--shade);--highlight: var(--accent-light);--badge: #f8b60c;--tag: var(--shade-dark);--code: #45c8ce;--full-screen: var(--shade-dark)}}.giscus-frame{padding:0 1px}dialog{background-color:var(--highlight);position:fixed;opacity:.9;z-index:1000}#nav{z-index:2;position:relative;max-width:var(--main-width);flex-grow:1}#reading-progress{z-index:1;background-color:var(--primary);width:100vw;max-width:100%;position:absolute;left:0;bottom:0;height:2px;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:Noto Sans TC,sans-serif;--font-family: Noto Sans TC, sans-serif}body{margin:0}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--anchor)}b,strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button,input{font-family:inherit;font-size:100%;line-height:1.15;overflow:visible}button{text-transform:none}input{margin:0}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}[type=checkbox]{box-sizing:border-box;padding:0}template{display:none}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}.article-title,h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem}.article-content h2,h4{font-size:1.5em;margin-bottom:1em}.article-content h2,.article-content h3,h4{line-height:1.5em}.article-content h3{font-size:1.25em;margin-bottom:1.2em}.article-content h4{font-size:1em;line-height:1.5em;margin-bottom:1.5em}body,p,pre,ul{font-size:1em}p,pre,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem;margin-bottom:1.36rem}h2{font-size:1.728rem}.article-content h2,.article-content h3,.article-content h4,.article-title,h3,h4{line-height:1.6rem;margin-bottom:1.36rem}.article-content h2,h4{font-size:1.2rem}.article-content h3,.article-content h4{font-size:1rem}body,p,pre,ul{font-size:1rem;line-height:1.6}p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){.article-title,h1,h2,h3{font-size:4.3978rem;line-height:4.4rem;margin-bottom:1.496rem}.article-title,h2,h3{font-size:3.1097rem;line-height:3.52rem}.article-title,h3{font-size:2.1989rem;line-height:2.64rem}.article-content h2,h4{font-size:1.5554rem}.article-content h2,.article-content h3,h4{line-height:1.76rem;margin-bottom:1.496rem}.article-content h3,.article-content h4,body,p,pre,ul{font-size:1.1rem}.article-content h4{line-height:1.76rem}body,p,pre,ul{line-height:1.6}.article-content h4,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){.article-title,h1,h2,h3{font-size:6.0756rem;line-height:6.72rem;margin-bottom:1.632rem}.article-title,h2,h3{font-size:4.05rem;line-height:4.8rem}.article-title,h3{font-size:2.7rem;line-height:2.88rem}.article-content h2,h4{font-size:1.8rem}.article-content h2,.article-content h3,h4{line-height:1.92rem;margin-bottom:1.632rem}.article-content h3,.article-content h4,body,p,pre,ul{font-size:1.2rem}.article-content h4{line-height:1.92rem}body,p,pre,ul{line-height:1.6}.article-content h4,p,pre,ul{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){padding:1.5em;overflow-x:scroll}code{border-radius:.3em;color:#e2777a;padding:0 .1em;font-size:90%;background:#2d2d2d;font-family:"Source Code Pro",monospace;background:0 0;color:var(--code)}body,h1,h2,h3,h4{font-family:var(--font-family)}a:hover{text-decoration:underline}@media (max-width:767px){x:-moz-any-link{display:table-cell}}button,input{border-radius:.3em;max-width:100%}input{padding:.75em;margin-bottom:1.5em;display:inline}button+input[type=checkbox],button+label,input+input[type=checkbox],input+label,label+*{page-break-before:always}button,label{display:inline-block}button{background:#f2f2f2;color:#191919;cursor:pointer;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--btn-primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--btn-primary)}input[type=color],input[type=datetime],input[type=time],input[type=url]{border:1px solid #595959;padding:.75em}input[type=checkbox]{flex-grow:0;margin:.75em .375em .75em 0;vertical-align:middle}input[type=checkbox]+label{page-break-before:avoid}*{border:0;box-sizing:border-box}section{margin-left:auto;margin-right:auto}header label{display:block}header{padding:4.5em 1.5em 1.25em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}@media (min-width:600px){header{padding:4.5em 1.5em 3em}header nav{padding:.375em 1.5em}}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left;display:flex}header nav h1 img{width:1.3em;height:auto;margin-right:.2em}header nav h1 img+a{font-weight:700;font-size:1.1em}header nav a{font-weight:400;text-decoration:none;font-family:var(--font-family);color:#181818;margin-left:1.5em;color:var(--text)}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}header nav label{color:#000;cursor:pointer;margin:0;font-style:normal;text-align:right}main{max-width:70rem;margin:0 auto;border-top:.5px solid var(--background)}footer{background:rgba(0,0,0,.8);color:#fff;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:.8em}footer span{font-size:.75em;color:var(--desc)}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ul{margin-bottom:0}blockquote{border-left:1px solid #f9c412;padding:0 1.5em;margin:1.5em 0 1.5em 1.5em;border-left:1px solid var(--primary)}blockquote footer{background:0 0;display:block;color:#ccc;padding:.75em 0;font-size:90%;text-align:start}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]{padding:0}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.punctuation{color:#ccc}.token.tag{color:#e2777a}.token.function{color:#f08d49}.token.property{color:#f8c555}.token.atrule,.token.important{color:#cc99cd}.token.url{color:#67cdcc}.token.important{font-weight:700}.token.inserted{color:green}body,footer,header nav{background:var(--background);color:var(--text)}aside{color:var(--text)}.nav-menu{float:right}#nav-toggle,#switch-to-light,.light-mode #switch-to-light,.nav-menu>a{display:none}.nav-links{position:fixed;width:100%;height:100%;background-color:var(--full-screen);top:-100%;left:0;right:0;bottom:0;overflow:hidden;transition:all .3s ease-in-out;transform:scale(0);display:flex;flex-direction:column;padding:3em;text-align:left}#nav-toggle+.hamburger-icon+.nav-links a,#nav-toggle+.hamburger-icon+.nav-links button{margin-left:0;margin-right:0;color:var(--text);font-size:1.25em;margin-top:1em;padding:0;background:0 0;text-align:left}.hamburger-icon{position:absolute;right:5px;margin-top:-2px;width:1.5em;z-index:10}.hamburger-icon div{position:relative;width:1.5em;height:3px;border-radius:3px;background-color:var(--highlight);margin-top:5px;transition:all .3s ease-in-out}#nav-toggle:checked+.hamburger-icon .hamburger-icon-top{transform:rotate(-45deg);margin-top:15px}#nav-toggle:checked+.hamburger-icon .hamburger-icon-bottom{opacity:0;transform:rotate(45deg)}#nav-toggle:checked+.hamburger-icon .hamburger-icon-center{transform:rotate(45deg);margin-top:-3px}#nav-toggle:checked+.hamburger-icon+.nav-links{top:0;transform:scale(1)}.dark-mode #switch-to-light{display:initial}#switch-to-dark,.dark-mode #switch-to-dark{display:none}.light-mode #switch-to-dark{display:initial}#switch-color-theme{display:none;background:0 0;background-repeat:no-repeat;background-position:center;vertical-align:sub;padding:0;margin:0;width:1.25em;height:1.25em}#switch-color-theme,.light-mode #switch-color-theme{background-image:url(/img/icons/dark-mode.svg)}.dark-mode #switch-color-theme{background-image:url(/img/icons/light-mode.svg)}@media (min-width:600px){.nav-menu>a{display:initial}#nav-toggle+.hamburger-icon,#nav-toggle+.hamburger-icon+.nav-links{display:none}#switch-color-theme{display:inline-block}}.article-header{padding-bottom:1.5em;padding-top:2.75em}.article-content{padding-top:0}.article-image{aspect-ratio:2/1;max-width:100vw}.article-info,.article-title{width:100%;text-align:left}.article-info{color:var(--border);margin-top:-1em}@media (min-width:600px){.article-header{padding-top:4.5em}.article-image{max-width:100%}.article-info{margin-top:-1.1em}}.article-bottom{display:flex;justify-content:space-between;margin-top:3em;flex-wrap:wrap}.article-sharing{text-align:right;white-space:nowrap}.article-author{display:flex;padding:1.5em 0;margin:1em 0;border-top:solid 1px var(--border);border-bottom:solid 1px var(--border)}.article-author-avatar,.article-author-avatar img{width:5em;min-width:100px;height:5em;min-height:100px}.article-author-avatar img{border-radius:100%}.article-author-info{display:flex;flex-direction:column;justify-content:space-evenly;margin-left:1em}.article-author-name{font-weight:500}.article-tags-list{display:flex;flex-wrap:wrap;list-style:none;margin:0;padding:0}.tag a{display:inline-flex;background:var(--anchor);color:var(--tag);margin-bottom:.5em;margin-right:.5em;font-size:.8rem;height:2em;line-height:2em;justify-content:center;align-items:center;white-space:nowrap;border-radius:5px;overflow:hidden}.tag a:hover{text-decoration:none}.article-tags-list .tag a{padding-left:.75em;padding-right:.75em}</style></head><body><script csp-hash="sha256-zpxrDd8T0qz3kBmsPk4N2Yljt/cI4nQpWytE1zmmtrk=" data-cfasync="false">(() => {
        let isDark = localStorage.getItem('isDarkTheme');
        isDark = isDark === null ? window.matchMedia("(prefers-color-scheme: dark)").matches: (isDark === 'true');
        document.body.setAttribute("class", isDark ? "dark-mode": "light-mode");
        localStorage.setItem('isDarkTheme', isDark ? true: false);
      })();</script><header class="article-header"><nav><div id="nav"><h1><img alt="Fran logo" height="192" src="/favicon.svg" width="192"> <a href="/" title="Homepage">Frannn.dev</a></h1><div class="nav-menu"><a href="/archives/">Archives</a> <a href="/tags/">Tags</a> <a href="/about/">About</a> <button aria-label="switch color mode" id="switch-color-theme"></button> <input id="nav-toggle" type="checkbox"> <label class="hamburger-icon" for="nav-toggle"><div class="hamburger-icon-top"></div><div class="hamburger-icon-center"></div><div class="hamburger-icon-bottom"></div></label><div class="nav-links"><a href="/archives/">Archives</a> <a href="/tags/">Tags</a> <a href="/about/">About</a> <button aria-label="switch to light mode" id="switch-to-light">Light Mode</button> <button aria-label="switch to dark mode" id="switch-to-dark">Dark Mode</button></div></div></div><div id="reading-progress" aria-hidden="true"></div></nav><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZHScKt-1920w.avif 1920w, /img/remote/ZHScKt-1280w.avif 1280w, /img/remote/ZHScKt-640w.avif 640w, /img/remote/ZHScKt-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZHScKt-1920w.webp 1920w, /img/remote/ZHScKt-1280w.webp 1280w, /img/remote/ZHScKt-640w.webp 640w, /img/remote/ZHScKt-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZHScKt-1920w.png 1920w, /img/remote/ZHScKt-1280w.png 1280w, /img/remote/ZHScKt-640w.png 640w, /img/remote/ZHScKt-320w.png 320w" type="image/png"><img alt="離開 Hexo，使用 Eleventy 架設部落格" height="1157" src="/img/remote/ZHScKt-1920w.png" width="2314" decoding="sync" loading="eager" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2314 1162'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAYAAACTphZWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjUlEQVQImT2PMQrGIAxGeyELVUtdXbSISnEW3Fz0FO3RerDvJ4G/QxKSPB7JEmNE7x1jDHjvUUpBrRVaa2zbBqUUpJRcl9Yacs7crOuK+77xvi+e58G+7x9IdSFACMENmVJKmHNyEPy3s5kSDY/j4LDWIoSA8zz5FNp9ZkrGGDY65xiis67r4hn9RHuCfzfGYwGkpgOQAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" class="article-image"></picture><h1 class="article-title">離開 Hexo，使用 Eleventy 架設部落格</h1><aside class="article-info"><time datetime="2022-08-02">Aug 02nd, 2022.</time> 2 mins read</aside><dialog id="message"></dialog></header><main><article class="article-content"><h2 id="%E5%89%8D%E8%A8%80">前言 <a href="#%E5%89%8D%E8%A8%80" class="direct-link">#</a></h2><p>從今年年初便知道 <a href="https://www.11ty.dev/">Eleventy</a> 這樣的一套 Static Site Generator，經過一番評估之後，最近終於趁著空閒的空檔，選擇 <a href="https://www.11ty.dev/">Eleventy</a> 作為新的技術框架，並以 <a href="https://github.com/google/eleventy-high-performance-blog">eleventy-high-performance-blog</a> 作為基底，架置了新的部落格，和過去所使用的 <a href="https://hexo.io/zh-tw/">Hexo</a> 框架說掰掰。</p><p>在這裡紀錄一些個人的使用心得，也讓其他想嘗試 <a href="https://www.11ty.dev/">Eleventy</a> 這套工具的人可以作為參考。</p><h2 id="%E7%82%BA%E4%BB%80%E9%BA%BC%E4%B8%8D%E7%94%A8-hexo%EF%BC%9F">為什麼不用 Hexo？ <a href="#%E7%82%BA%E4%BB%80%E9%BA%BC%E4%B8%8D%E7%94%A8-hexo%EF%BC%9F" class="direct-link">#</a></h2><p>過去我使用 <a href="https://hexo.io/zh-tw/">Hexo</a> 架置部落格也有好幾年，事實上作為新手架置部落格的選擇來說，還是一個很不錯的選擇。</p><p>我認為 <a href="https://hexo.io/zh-tw/">Hexo</a> 有以下的優點：</p><ul><li>基於 Node.js 撰寫，在本地編譯建置靜態頁面，有一定 SEO 優勢</li><li>開源社群十分活躍，你幾乎不需要自己重造輪子</li><li>基於以上，有豐富的漂亮主題與外掛</li><li>中文文件、網路資源多，學習成本低</li></ul><p>但是，基於以上的優點……菜鳥時期的我也犯下了一些錯誤：</p><ul><li>套用了漂亮的主題，卻未著重效能</li><li>使用第三方外掛，實際上未必需要那麼強大的自定義功能，增加程式複雜度</li><li>使用第三方套件並未積極更新最新版本，間接導致損失了可能的效能改進或延伸出資安問題</li></ul><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1uywhb-1920w.avif 1920w, /img/remote/1uywhb-1280w.avif 1280w, /img/remote/1uywhb-640w.avif 640w, /img/remote/1uywhb-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1uywhb-1920w.webp 1920w, /img/remote/1uywhb-1280w.webp 1280w, /img/remote/1uywhb-640w.webp 640w, /img/remote/1uywhb-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1uywhb-1920w.png 1920w, /img/remote/1uywhb-1280w.png 1280w, /img/remote/1uywhb-640w.png 640w, /img/remote/1uywhb-320w.png 320w" type="image/png"><img alt="舊桌機版網頁 Lighthouse 表現" height="632" src="/img/remote/1uywhb-1920w.png" width="1002" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1002 632'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAm0lEQVQImTWNyQ6CQBBE+f+vUhPvavDikWgU2YUZZumeZyBQp6r0q+pMQkCj0LqRwlZgKrANjS35hIFFKSWytFqYo+c7NcxDhf/V9Kal89NCbeBmospWgagJ9oV9cQ8P+6YXsx0U734UeU5xv7L0sijKOM08yxdVN2I8qAh1N3A5nbkdDyiQiSh29kRnmVzAOFnfjjbiVVdIVfkDLEjo1MEL2dsAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><blockquote><p>過去我所使用的是 <a href="https://github.com/ppoffice/hexo-theme-icarus">hexo-theme-icarus</a> 這個主題，利用 Lighthouse 量測，在桌機上的表現還不算太差，但還有改善空間</p></blockquote><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZB74PO-1920w.avif 1920w, /img/remote/ZB74PO-1280w.avif 1280w, /img/remote/ZB74PO-640w.avif 640w, /img/remote/ZB74PO-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZB74PO-1920w.webp 1920w, /img/remote/ZB74PO-1280w.webp 1280w, /img/remote/ZB74PO-640w.webp 640w, /img/remote/ZB74PO-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZB74PO-1920w.png 1920w, /img/remote/ZB74PO-1280w.png 1280w, /img/remote/ZB74PO-640w.png 640w, /img/remote/ZB74PO-320w.png 320w" type="image/png"><img alt="舊手機版網頁 Lighthouse 表現" height="602" src="/img/remote/ZB74PO-1920w.png" width="1011" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1011 602'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkklEQVQImT2MCwqDMBAFvf9l2lv0IBUsliYmUfPZZKdoWhfewuMNM0jciCkR9xXZLZQAZUPTgpYVBVSVgd81ySQ7ksyT7CbEjUh4n9sJHu9IU6UqNIVcKrX9FZfxkAPRQPHX2GrFviZySmcfWlNiFuw8EtxCrh1MMfO43zDz3EGRhvMbwS98QsSunRQRjPOI9P4F1yTqMk88C3gAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><blockquote><p>然而透過 Lighthouse 量測，在手機上的表現是顯而易見的差強人意</p></blockquote><p>其實後來想想，我真的需要這個主題之中的每一個功能嗎？答案當然是否定的。</p><p>對於自己的部落格，我的要求也和以前的我有所不同：</p><ul><li>效能優化擺在第一順位考量，不需要太浮誇的功能，越簡潔越好</li><li>比起過於笨重的第三方套件，還不如不要，我可以自己動手</li><li>基於前者，要容易按照我自己的需求客製化，框架架構不要太複雜</li></ul><p>釐清自己的需求與目的後，開始研究不同技術與工具評估，透過 Huli 的這篇文章（<a href="https://blog.huli.tw/2021/08/22/eleventy-over-hexo/">除了 hexo，也可以考慮用 eleventy 來寫技術部落格</a>）我得知了 <a href="https://github.com/google/eleventy-high-performance-blog">eleventy-high-performance-blog</a> 這個 template repo。</p><h2 id="%E9%97%9C%E6%96%BC-eleventy-high-performance-blog">關於 eleventy-high-performance-blog <a href="#%E9%97%9C%E6%96%BC-eleventy-high-performance-blog" class="direct-link">#</a></h2><p><a href="https://github.com/google/eleventy-high-performance-blog">eleventy-high-performance-blog</a> 是一套由 google 工程師所建置的開源部落格模板，以打造高速效能為重點，這個模板已經建構好一套相對完整的架構，包含：</p><ul><li><strong>圖片最佳化</strong>（響應式圖片、lazy load、轉換 webp / AVIF 等優化格式）</li><li><strong>CSS / JS minify</strong>（使用 <a href="https://rollupjs.org/guide/en/">rollup.js</a>、<a href="https://purgecss.com/">PurgeCSS</a> 等工具）</li><li><strong>基本 SEO 建設</strong>（HTML 語意化、meta tag、Sitemap 等等）</li><li>考量 <strong><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Web Accessibility（a11y）</a></strong> 而實作</li><li>導入了 <a href="https://mochajs.org/">mocha</a>，有一套<strong>基本的測試架構</strong>，CI 階段可整合測試</li></ul><p>專案架構也清晰精簡，易於改動維護，可以說是麻雀雖小，五臟俱全！</p><p>非要雞蛋裡挑骨頭的話，這個模板未經修改、直接建置的 <a href="https://eleventy-high-performance-blog-sample.industrialempathy.com/">Demo site</a> 看起來確實是比 Hexo 社群那些酷酷的主題要來得精簡許多……</p><p>但是，正如這個專案的 README 所說：</p><blockquote><p>Knock yourself out. This is a template repository.</p></blockquote><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZV6wh2-1920w.avif 1920w, /img/remote/ZV6wh2-1280w.avif 1280w, /img/remote/ZV6wh2-640w.avif 640w, /img/remote/ZV6wh2-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZV6wh2-1920w.webp 1920w, /img/remote/ZV6wh2-1280w.webp 1280w, /img/remote/ZV6wh2-640w.webp 640w, /img/remote/ZV6wh2-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZV6wh2-1920w.png 1920w, /img/remote/ZV6wh2-1280w.png 1280w, /img/remote/ZV6wh2-640w.png 640w, /img/remote/ZV6wh2-320w.png 320w" type="image/png"><img alt="接受挑戰" height="1280" src="/img/remote/ZV6wh2-1920w.png" width="2048" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2048 1280'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAIAAAB1kpiRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfklEQVQImV3MvQrDIBiF4dz/VtspdUnR3ItXIIKLjeAgCv4gOuiXwbaBvtOBB87Se9+2F7o/1vV5Q4jQHWNM6U4Iba0t8C3GqJQ63oe1FgDGGADw4VJKCMEYI6UUQowxeu8X11pLKXOklKZdPA+891rrnPP/+Yxzzhhzzv34BHKNpQNCaD/cAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><p><strong>Ok，我接受這個挑戰！</strong></p><h2 id="%E6%9E%B6%E8%A8%AD%E5%80%8B%E4%BA%BA%E5%8C%96%E9%83%A8%E8%90%BD%E6%A0%BC%E7%9A%84%E5%BF%83%E8%B7%AF%E5%88%86%E4%BA%AB">架設個人化部落格的心路分享 <a href="#%E6%9E%B6%E8%A8%AD%E5%80%8B%E4%BA%BA%E5%8C%96%E9%83%A8%E8%90%BD%E6%A0%BC%E7%9A%84%E5%BF%83%E8%B7%AF%E5%88%86%E4%BA%AB" class="direct-link">#</a></h2><p>開始改造的第一步，首要之務當然是：<strong>確立風格，列出需求</strong></p><p>以我的例子來說，參考了一些前輩和同事的技術部落格後，確立自己心有所屬的主題風格後，再將我心中的想像、這其中必備的功能一一列出來：</p><ul><li>留言功能是必備</li><li>文章要有漂亮的封面圖片</li><li>想要深色主題和淺色主題的切換功能</li><li>要有頁面分頁功能（分頁邏輯要和舊站一致）</li><li>文章 link url 的轉換規則需要調整，不直接使用 title 字串（邏輯要和舊站一致，方便我作 301 轉址）</li><li>串接 Google Analytics</li></ul><p>……諸多調整和樣式有關，族繁不及備載。</p><p>總而言之，事前確認越是具體，實作階段也就更明確，避免反覆修改。</p><h3 id="color-palette">Color Palette <a href="#color-palette" class="direct-link">#</a></h3><p>Color Palette 的部分，我則是借助了 <a href="http://colormind.io/bootstrap/">Colormind</a> 這個網站幫我配好合理的網頁配色，實務上再按需求作一些 darken &amp; lighten 色彩轉換。</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/AQ1G6-1920w.avif 1920w, /img/remote/AQ1G6-1280w.avif 1280w, /img/remote/AQ1G6-640w.avif 640w, /img/remote/AQ1G6-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/AQ1G6-1920w.webp 1920w, /img/remote/AQ1G6-1280w.webp 1280w, /img/remote/AQ1G6-640w.webp 640w, /img/remote/AQ1G6-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/AQ1G6-1920w.png 1920w, /img/remote/AQ1G6-1280w.png 1280w, /img/remote/AQ1G6-640w.png 640w, /img/remote/AQ1G6-320w.png 320w" type="image/png"><img alt="Colormind" height="472" src="/img/remote/AQ1G6-1920w.png" width="948" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 948 472'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAYAAACTphZWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4UlEQVQImR3BT0oCUQDA4bcIRmtmevOa1yAYSZYlOtSQU0I2SWME2R/bZCBlKIIkCC3zFoGLlkGbDuLCaNemE9QBusAv6PuEbdmYpkkiaTFjSOaSJjJhIG0bSymkUig5j5ISEUX7XDQanB6XuKxl2D0ssVQ9wt8JiTbWCPJ5MgWf5dw6Yvo+4d/vM3zv8fY1pvj5w+j1hY9Ok6dBn+jhkXLrDlGvn3DbbnM/bNFv5jjvXZO9uiGsHnC2WaQSbLG6HbJS8BFxHNPtdgjCCsaswvPSpJSD6zhIvciC1niui6c1f+/9YY9BkF0CAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><blockquote><p>只需要選好主色，點擊 Generate 便會自動產生合理的網頁配色。當然，你也可以設定副色等等，將其一併納入考量！</p></blockquote><h3 id="%E7%95%99%E8%A8%80%E5%8A%9F%E8%83%BD---giscus">留言功能 - <a href="https://giscus.app/zh-TW">Giscus</a> <a href="#%E7%95%99%E8%A8%80%E5%8A%9F%E8%83%BD---giscus" class="direct-link">#</a></h3><p>至於留言功能的部分，本來是在 <a href="https://utteranc.es/">utterances</a> 和 <a href="https://jamcomments.com/">JamComments</a> 之間反覆猶豫，兩者對我來說各有優缺。</p><p>我一直以來都不是很喜歡 <a href="https://utteranc.es/">utterances</a> 這種相依於 GitHub issues 相關 API 的方式，其實使用上並不會造成什麼問題，但對我來說 ...Is this an issue for me?</p><p>心裡總是有種彆扭的感覺在那裡，否則單以功能面來說，<a href="https://utteranc.es/">utterances</a> 絕對是可以滿足我的需求。</p><p>反過來說，<a href="https://jamcomments.com/">JamComments</a> 這個第三方服務雖然看起來和 Eleventy 有不錯的支援性，甚至文件上也提供了<a href="https://jamcomments.com/docs/integrations/eleventy/">官方外掛</a>，但是對我而言，網站所相依的第三方服務，當然還是能少一個是一個。</p><p>直到我在 SNS 上偶然看見有人推薦 <a href="https://giscus.app/zh-TW">Giscus</a> 這個工具，完美解除了我上述的疑慮！</p><p><a href="https://giscus.app/zh-TW">Giscus</a> 其實是受到 <a href="https://utteranc.es/">utterances</a> 啟發，但不同的是，背後所使用的是 GitHub Discussions 相關 API。</p><p>當然這套工具也支援多樣的主題樣式設定，支援多語言，還可以讓我透過 <code>window.postMessage</code> 等方式對 giscus iframe 做更進一步的動態互動。</p><p>文件很清楚，串接過程中也沒遇到什麼問題，是一套我會想強力推薦給大家的留言系統工具！</p><h3 id="ci%2Fcd">CI/CD <a href="#ci%2Fcd" class="direct-link">#</a></h3><p>在本地環境弄得差不多了，下一步開始著手調整 CI/CD workflow。</p><p>Deploy 部分我就直接使用 GitHub Actions 一口氣處理掉了，覺得自己不太需要用到 <a href="https://www.netlify.com/">Netlify</a> 服務，需要作轉址或是 SSL 憑證則是透過熟悉的 <a href="https://www.cloudflare.com/zh-tw/">Cloudflare</a> 幫忙處理。</p><h4 id="ci%2Fcd-flow-%E8%AA%AA%E6%98%8E">CI/CD flow 說明 <a href="#ci%2Fcd-flow-%E8%AA%AA%E6%98%8E" class="direct-link">#</a></h4><p>基本上常駐的就是三支 branch：</p><ul><li><strong><code>develop</code></strong>：主要開發與測試使用，有異動便會觸發 <code>build &amp; test</code> CI 流程，沒問題再人工手動進 code 到 <code>main</code> branch</li><li><strong><code>main</code></strong>：有異動便會觸發 <code>build &amp; deploy</code> CD 流程，將建置產生的異動自動推上 <code>gh-pages</code> branch</li><li><strong><code>gh-pages</code></strong>：不直接對這個 branch 操作，有異動就會直接觸發 Github 預設的 <code>pages build and deployment</code> workflow，我什麼都不用做 😆</li></ul><h4 id="build-%26-deploy-workflow-%E8%A8%AD%E5%AE%9A%E6%AA%94%E7%AF%84%E4%BE%8B"><code>build &amp; deploy</code> workflow 設定檔範例 <a href="#build-%26-deploy-workflow-%E8%A8%AD%E5%AE%9A%E6%AA%94%E7%AF%84%E4%BE%8B" class="direct-link">#</a></h4><pre class="language-yml"><code class="language-yml"><span class="token atrule key">name</span><span class="token punctuation">:</span> build &amp; deploy<br><span class="token atrule key">on</span><span class="token punctuation">:</span><br>  <span class="token atrule key">push</span><span class="token punctuation">:</span><br>    <span class="token atrule key">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span><br>  <span class="token atrule key">pull_request</span><span class="token punctuation">:</span><br>    <span class="token atrule key">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span><br><span class="token atrule key">jobs</span><span class="token punctuation">:</span><br>  <span class="token atrule key">build</span><span class="token punctuation">:</span><br>    <span class="token atrule key">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest<br>    <span class="token atrule key">strategy</span><span class="token punctuation">:</span><br>      <span class="token atrule key">matrix</span><span class="token punctuation">:</span><br>        <span class="token atrule key">node-version</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>14.x<span class="token punctuation">]</span><br>    <span class="token atrule key">steps</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> <span class="token atrule key">uses</span><span class="token punctuation">:</span> actions/checkout@v2<br>      <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Use Node.js $<br>        <span class="token atrule key">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1<br>        <span class="token atrule key">with</span><span class="token punctuation">:</span><br>          <span class="token atrule key">node-version</span><span class="token punctuation">:</span> $<br>      <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Install dependencies and build<br>        <span class="token atrule key">run</span><span class="token punctuation">:</span> npm install <span class="token important">&amp;&amp;</span> npm run build<span class="token punctuation">-</span>ci<br>      <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Deploy<br>        <span class="token atrule key">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@v4<br>        <span class="token atrule key">with</span><span class="token punctuation">:</span><br>          <span class="token atrule key">ssh-key</span><span class="token punctuation">:</span> $<br>          <span class="token atrule key">branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages<br>          <span class="token atrule key">folder</span><span class="token punctuation">:</span> _site</code></pre><p>Deploy job 使用了 <a href="https://github.com/JamesIves/github-pages-deploy-action">JamesIves/github-pages-deploy-action</a> 代勞，記得按照<a href="https://github.com/JamesIves/github-pages-deploy-action#using-an-ssh-deploy-key-">文件說明</a>去 Repo Settings 設定 <strong>Deploy key</strong> 和 <strong>Repository secrets</strong>。</p><h3 id="%E8%B3%BC%E8%B2%B7%E8%87%AA%E5%AE%9A%E7%BE%A9%E5%9F%9F%E5%90%8D%EF%BC%8C%E8%A8%AD%E5%AE%9A-cloudflare-%E4%BB%A3%E7%AE%A1-dns">購買自定義域名，設定 Cloudflare 代管 DNS <a href="#%E8%B3%BC%E8%B2%B7%E8%87%AA%E5%AE%9A%E7%BE%A9%E5%9F%9F%E5%90%8D%EF%BC%8C%E8%A8%AD%E5%AE%9A-cloudflare-%E4%BB%A3%E7%AE%A1-dns" class="direct-link">#</a></h3><p>不詳述如何設定自定義域名了，總之買完之後要去域名服務商調整設定，使用 <a href="https://www.cloudflare.com/zh-tw/">Cloudflare</a> 代管 DNS。</p><p>可以參考我過去的這篇文章：<a href="https://frannn.dev/posts/d22e4c38/#%E7%94%A8-cloudflare-%E5%8A%A0%E4%B8%8A-ssl-%E6%86%91%E8%AD%89">什麼是 SSL？透過 Cloudflare 來啟用 HTTPS</a></p><p>光是 <a href="https://www.cloudflare.com/zh-tw/">Cloudflare</a> 的免費方案就提供了許多網站加速、安全防禦服務，我重點設定的項目有這些：</p><ul><li><strong>SSL/TLS 憑證</strong>（一律使用 HTTPS，同時自動改寫）</li><li><strong>Caching</strong>（調整瀏覽器快取 TTL 時間）</li><li><strong>使用 <a href="https://support.cloudflare.com/hc/en-us/articles/200168196-Using-Cloudflare-Auto-Minify">Auto Minify</a></strong></li><li><strong>啟用 Brotli 壓縮</strong></li><li><strong>啟用 <a href="https://support.cloudflare.com/hc/en-us/articles/200168056-Understanding-Rocket-Loader">Rocket Loader</a></strong></li></ul><h3 id="%E6%88%90%E6%9E%9C">成果 <a href="#%E6%88%90%E6%9E%9C" class="direct-link">#</a></h3><p>最後，你現在眼前所看到的這個 blog 便是一切的成果！</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2pjhxt-1920w.avif 1920w, /img/remote/Z2pjhxt-1280w.avif 1280w, /img/remote/Z2pjhxt-640w.avif 640w, /img/remote/Z2pjhxt-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2pjhxt-1920w.webp 1920w, /img/remote/Z2pjhxt-1280w.webp 1280w, /img/remote/Z2pjhxt-640w.webp 640w, /img/remote/Z2pjhxt-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2pjhxt-1920w.png 1920w, /img/remote/Z2pjhxt-1280w.png 1280w, /img/remote/Z2pjhxt-640w.png 640w, /img/remote/Z2pjhxt-320w.png 320w" type="image/png"><img alt="新桌機版網頁 Lighthouse 表現" height="609" src="/img/remote/Z2pjhxt-1920w.png" width="1012" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1012 609'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuElEQVQImVWMu4oCQRBF5/PMNhRM/AX/QjDVjQxWRANTMTI3MNlATAQRQRR82z2vni67j0y7BltwLlzuoSLJUkxuUFnM2WouEnOThKNVKEnBg/eeiL9LJGet9qzUjo0+sE4OHM0tbEEsowRXQsCLQwrBWIcpiv8fN+bE3aWfyvJ3wbD9zWw2Dz1y3mMKYXvZc9YKK29xMp7SqNYYdH/e4vPp0Doj0w/ucc41tmHo9UdUvuo0W50gvgCWyOAj4In7ZwAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><blockquote><p>利用 Lighthouse 量測，同一篇文章在桌機上的表現</p></blockquote><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z21jhib-1920w.avif 1920w, /img/remote/Z21jhib-1280w.avif 1280w, /img/remote/Z21jhib-640w.avif 640w, /img/remote/Z21jhib-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z21jhib-1920w.webp 1920w, /img/remote/Z21jhib-1280w.webp 1280w, /img/remote/Z21jhib-640w.webp 640w, /img/remote/Z21jhib-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z21jhib-1920w.png 1920w, /img/remote/Z21jhib-1280w.png 1280w, /img/remote/Z21jhib-640w.png 640w, /img/remote/Z21jhib-320w.png 320w" type="image/png"><img alt="新手機版網頁 Lighthouse 表現" height="612" src="/img/remote/Z21jhib-1920w.png" width="1001" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1001 612'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArklEQVQImT3MSwrCQAyAYe/mwo3gATya7sWdiHgNBReliooPfD9mIm2nM8780lYNJJDkS2o2SzHG8EyFs9VcnHB3L05WoVwCAUII1PiGtgmx2jLXe1ZyYJkcueSq3JWwKEUWl/hiCsF5vH1j8je5tSX+f4yzA8onvxathGGny2a9rqD3AWMsy+uOmwh59YAoWtCstxgNxhV0zqMlJRXFQzLur0pOpjMazTa9/qCEH+6P4gqLsOxrAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><blockquote><p>利用 Lighthouse 量測，同一篇文章在手機上的表現</p></blockquote><p>可以看到，雖然加了一些雜七雜八客製化功能和樣式（甚至是串上了 Google Analytics），但 Lighthouse 還是有很亮眼的表現。</p><p>再進一步比較修改前和修改後，手機版網頁上的各個指標所耗費時間：</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/I4pQV-1920w.avif 1920w, /img/remote/I4pQV-1280w.avif 1280w, /img/remote/I4pQV-640w.avif 640w, /img/remote/I4pQV-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/I4pQV-1920w.webp 1920w, /img/remote/I4pQV-1280w.webp 1280w, /img/remote/I4pQV-640w.webp 640w, /img/remote/I4pQV-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/I4pQV-1920w.png 1920w, /img/remote/I4pQV-1280w.png 1280w, /img/remote/I4pQV-640w.png 640w, /img/remote/I4pQV-320w.png 320w" type="image/png"><img alt="舊手機版網頁的 Performance" height="888" src="/img/remote/I4pQV-1920w.png" width="1554" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1554 888'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhElEQVQImVWNyw6FIBBD/f9PlUcUFWFg5hjBu7jdNGna0+VMiVIKZoYZYEq9M621kYnI8CVvkVYrQwZdO1tcqb/s0yjeOY/VixRtrMmT8zVfVCexHNdYd31/p9T0jzaJAkU6IexsznPEQAqB9PnuPU2E5b0zU67zIDpH9IHo/eeB6GbxARiK6h7OsFJjAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><blockquote><p>Before：<strong>FCP</strong> 時間高達 3.1 秒，<strong>LCP</strong> 時間更需要 9.4 秒，完全就是不合格。</p></blockquote><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1XzC66-1920w.avif 1920w, /img/remote/Z1XzC66-1280w.avif 1280w, /img/remote/Z1XzC66-640w.avif 640w, /img/remote/Z1XzC66-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1XzC66-1920w.webp 1920w, /img/remote/Z1XzC66-1280w.webp 1280w, /img/remote/Z1XzC66-640w.webp 640w, /img/remote/Z1XzC66-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1XzC66-1920w.png 1920w, /img/remote/Z1XzC66-1280w.png 1280w, /img/remote/Z1XzC66-640w.png 640w, /img/remote/Z1XzC66-320w.png 320w" type="image/png"><img alt="新手機版網頁的 Performance" height="894" src="/img/remote/Z1XzC66-1920w.png" width="1554" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1554 894'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVQImX2NSQrCQBBF+8gaTGtAUPQYihs9i4qJBoILB/AKJmYeup90B7c+eAX1q4oSeVmQ5Rld1/GjbhuqqkJrTdu2VpE3Je80tgtmYIjLhNhkfWsReV0Qp297pVSHVpqk+JCkic3MJ6UUQgENpv5H3K53TvsA/+DjHy9EgTEkOveGp4DX44nYbHY4zhTPWyLlDCnnuHLOyJ0xniwYDKes1lu++IfYvfBW9MQAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><blockquote><p>After：<strong>FCP</strong> 時間降至 1.0 秒，<strong>LCP</strong> 時間只需要 1.3 秒，指標一切綠燈！</p></blockquote><p>對於這樣的復仇成果，我個人可以說是相當滿意。</p><h2 id="%E7%B8%BD%E7%B5%90">總結 <a href="#%E7%B8%BD%E7%B5%90" class="direct-link">#</a></h2><p>感謝前人指路，讓我發現了一套這麼棒的模板工具！</p><p>過去我是懶人起手，直接交給了 Hexo 社群提供的主題來包辦一切，但是無形之中也因個人掌握不足，間接導致一些額外的效能問題。</p><p>這次基於簡潔的 <a href="https://github.com/google/eleventy-high-performance-blog">eleventy-high-performance-blog</a> 模板工具來開發，客製化個人功能的過程中，每告一段落、完成了一個較大規模的異動調整，我就會停下來檢查一下剛才完成的部分有沒有什麼地方可以再優化。（我個人是花了點心力在確認資源載入的 <code>preload</code> 設定等等）</p><p>與日常的專案開發不同，受限於頻繁的功能迭代有時候很難落實這件事情──然而<strong>頻繁量測，不斷地調整與測試，是提升網頁效能的必經之路</strong>。</p><p>不排斥自己動手來的話，我是很推薦 <a href="https://github.com/google/eleventy-high-performance-blog">eleventy-high-performance-blog</a> 這個模板工具的，還收穫了滿滿的成就感！</p><p>這個部落格的原始碼放在 <a href="https://github.com/frantw/eleventy-high-performance-blog">GitHub</a> 上，如有疑問歡迎在這篇文章底下留言。</p><h3 id="%E5%85%B6%E4%BB%96%E5%8F%83%E8%80%83">其他參考 <a href="#%E5%85%B6%E4%BB%96%E5%8F%83%E8%80%83" class="direct-link">#</a></h3><ul><li><a href="https://blog.huli.tw/2021/08/22/eleventy-over-hexo/">除了 hexo，也可以考慮用 eleventy 來寫技術部落格</a></li><li><a href="https://jason-memo.dev/posts/why-i-leave-medium-and-build-blog-with-eleventy/">為什麼我離開 Medium 用 eleventy 做一個 blog</a></li></ul><section class="article-bottom"><ul class="article-tags-list"><li class="tag"><a href="/tags/eleventy/">#Eleventy</a></li><li class="tag"><a href="/tags/11ty/">#11ty</a></li></ul><div class="article-sharing"><a href="https://frannn.dev/posts/82901432/" on-click="share">分享文章</a></div></section><section class="article-author"><div class="article-author-avatar"><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/avatar-1920w.avif 1920w, /img/avatar-1280w.avif 1280w, /img/avatar-640w.avif 640w, /img/avatar-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/avatar-1920w.webp 1920w, /img/avatar-1280w.webp 1280w, /img/avatar-640w.webp 640w, /img/avatar-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/avatar-1920w.jpg 1920w, /img/avatar-1280w.jpg 1280w, /img/avatar-640w.jpg 640w, /img/avatar-320w.jpg 320w" type="image/jpeg"><img alt="metadata.author.name" height="300" src="/img/avatar-1920w.jpg" width="300" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 300 300'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAACXBIWXMAACdfAAAnXwEdhrpqAAAA00lEQVQImQHIADf/AP7PTP/STPbIRs6YObB4MNGcOf/SS/7QTAD+z0v/1U+edTltOyd1PSNzOyS6iTj/1U0A/9dP2Kc+ekMsg1M3h1M1cjofhVkx/M9NAP/WSuazPaFxRM+wnrOPb5lgR8uLQf/PRQD+zmb/1EzxwHz56+z/6di2u62Ow4jozloA2MW/1cOov7eu2snJ6NnU2tvSQ7S7WcLAALy+vsLCx8XHybzAwMC+vqXOzF/CxEjCyQCpsbHJx8fKysrEw8K7urpZuLxCwcUUsbR/s3j60UuMMQAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></div><div class="article-author-info"><div class="article-author-name"><a href="/about/">Fran</a></div><div class="article-author-desc">一隻野生的前端工程師。相信每一行程式碼都是改變世界的力量。</div></div></section><section class="article-comment"><script csp-hash="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" crossorigin="anonymous" data-category="Comments" data-category-id="DIC_kwDOHQSdIc4CQfRB" data-emit-metadata="0" data-input-position="top" data-lang="zh-TW" data-loading="lazy" data-mapping="title" data-reactions-enabled="1" data-repo="frantw/eleventy-high-performance-blog" data-repo-id="R_kgDOHQSdIQ" data-strict="0" data-theme="dark_dimmed" defer="" src="https://giscus.app/client.js"></script></section><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"離開 Hexo，使用 Eleventy 架設部落格","image":["https://frannn.dev/img/remote/1uywhb-1920w.png","https://frannn.dev/img/remote/ZB74PO-1920w.png","https://frannn.dev/img/remote/ZV6wh2-1920w.png","https://frannn.dev/img/remote/AQ1G6-1920w.png","https://frannn.dev/img/remote/Z2pjhxt-1920w.png","https://frannn.dev/img/remote/Z21jhib-1920w.png","https://frannn.dev/img/remote/I4pQV-1920w.png","https://frannn.dev/img/remote/Z1XzC66-1920w.png","https://frannn.dev/img/avatar-1920w.jpg"],"author":"Fran","genre":"Insert a schema.org genre","publisher":{"@type":"Organization","name":"Fran","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-192x192.png?hash=b365a9bb9c"}},"url":"https://frannn.dev/posts/82901432/","mainEntityOfPage":"https://frannn.dev/posts/82901432/","datePublished":"2022-08-02","dateModified":"2022-08-02","description":"前言 # 從今年年初便知道 Eleventy 這樣的一套 Static Site Generator，經過一番評估之後，最近終於趁著空閒的空檔，選擇 Eleventy 作為新的技術框架，並以 eleventy-high-performance-blog..."}</script></article></main><footer><p>© 2017-2022 Fran<br><span>Based on <a href="https://github.com/google/eleventy-high-performance-blog" rel="noopener" target="_blank">eleventy-high-performance-blog</a><span></span></span></p></footer></body></html>