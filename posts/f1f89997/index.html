<!DOCTYPE html><html domain="frannn.dev" ga-id="UA-102201439-3" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><link href="/img/favicon/apple-touch-icon.png?hash=d2bab3fe11" rel="apple-touch-icon" sizes="180x180"><link href="/img/favicon/favicon-192x192.png?hash=b365a9bb9c" rel="icon" sizes="192x192" type="image/png"><link href="/img/favicon/favicon-32x32.png?hash=8c6aa913da" rel="icon" sizes="32x32" type="image/png"><link href="/img/favicon/favicon-16x16.png?hash=a904958e48" rel="icon" sizes="16x16" type="image/png"><link href="/favicon.svg" rel="preload" as="image"><link href="/img/icons/light-mode.svg" rel="preload" as="image"><link href="/img/icons/dark-mode.svg" rel="preload" as="image"><meta content="#f9c412" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>正則表達式 Regular Expression 與深入應用</title><meta content="正則表達式 Regular Expression 與深入應用" property="og:title"><meta content="介紹在 JavaScript 中處理資料驗證時，常見的 RegExp Pattern 及其撰寫原理" name="description"><meta content="介紹在 JavaScript 中處理資料驗證時，常見的 RegExp Pattern 及其撰寫原理" property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@" name="twitter:site"><meta content="@" name="twitter:creator"><meta content="https://frannn.dev/img/remote/1sRfHV.jpg" property="og:image"><link href="https://frannn.dev/posts/f1f89997/" rel="canonical"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="Fran"><link href="/" rel="preconnect" crossorigin=""><link href="https://www.googletagmanager.com" rel="preconnect" crossorigin=""><link href="https://www.googletagmanager.com" rel="dns-prefetch"><link href="https://giscus.app" rel="preconnect" crossorigin=""><link href="https://giscus.app" rel="dns-prefetch"><script defer="" src="/js/min.js?hash=c875b20c8d" async=""></script><script defer="" src="https://www.googletagmanager.com/gtag/js?id=UA-102201439-3" async=""></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-102201439-3');</script><script csp-hash="sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #41bcc2;--primary-dark: #287b7f;--accent-light: #fad24c;--accent-dark: #919693;--shade: #aec0c0;--shade-light: #f6f8f8;--shade-dark: #3a3c57;--btn-default: #999999;--btn-primary: #43bcc3;--btn-info: #3a3c57;--btn-success: #49b373;--btn-warning: #c7a33b;--btn-danger: #f44336;--btn-text: #ffffff;--border: var(--shade);--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{z-index:1;position:fixed;top:0;left:0;width:100vw;max-width:100%;padding:.575em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right;display:flex;justify-content:center}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}.dark-mode,.light-mode{--highlight: var(--accent-light)}.light-mode{--text: var(--shade-dark);--background: var(--shade-light);--anchor: var(--primary-dark);--desc: var(--accent-dark);--badge: var(--btn-primary);--tag: var(--btn-text);--code: #a84caa;--full-screen: #f8fafa}.dark-mode{--text: var(--shade-light);--background: #282a3c;--anchor: var(--accent-light);--desc: var(--shade);--badge: #f8bc0c;--tag: var(--shade-dark);--code: #45c8ce;--full-screen: var(--shade-dark)}@media (prefers-color-scheme:light){:root{--text: var(--shade-dark);--background: var(--shade-light);--anchor: var(--primary-dark);--desc: var(--accent-dark);--highlight: var(--accent-light);--badge: var(--btn-primary);--tag: var(--btn-text);--code: #a84caa;--full-screen: var(--btn-text)}}@media (prefers-color-scheme:dark){:root{--text: var(--shade-light);--background: #282a3c;--anchor: var(--accent-light);--desc: var(--shade);--highlight: var(--accent-light);--badge: #f8b60c;--tag: var(--shade-dark);--code: #45c8ce;--full-screen: var(--shade-dark)}}.giscus-frame{padding:0 1px}dialog{background-color:var(--highlight);position:fixed;opacity:.9;z-index:1000}#nav{z-index:2;position:relative;max-width:var(--main-width);flex-grow:1}#reading-progress{z-index:1;background-color:var(--primary);width:100vw;max-width:100%;position:absolute;left:0;bottom:0;height:2px;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:Noto Sans TC,sans-serif;--font-family: Noto Sans TC, sans-serif}body{margin:0}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--anchor)}b,strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button,input{font-family:inherit;font-size:100%;line-height:1.15;overflow:visible}button{text-transform:none}input{margin:0}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}[type=checkbox]{box-sizing:border-box;padding:0}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}.article-title,h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem}.article-content h2{font-size:1.5em;margin-bottom:1em;line-height:1.5em}.article-content h3{line-height:1.5em;font-size:1.25em;margin-bottom:1.2em;font-size:1rem}body,ol,p,pre,ul{font-size:1em}ol,p,pre,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem;margin-bottom:1.36rem}h2{font-size:1.728rem}.article-content h2,.article-content h3,.article-title,h3{line-height:1.6rem;margin-bottom:1.36rem}.article-content h2{font-size:1.2rem}body,ol,p,pre,ul{font-size:1rem;line-height:1.6}ol,p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}.article-title,h3{font-size:2.1989rem;line-height:2.64rem}.article-content h2{font-size:1.5554rem;line-height:1.76rem}.article-content h3{line-height:1.76rem;font-size:1.1rem}body,ol,p,pre,ul{font-size:1.1rem;line-height:1.6}.article-content h2,.article-content h3,.article-title,h1,h2,h3,ol,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}.article-title,h3{font-size:2.7rem;line-height:2.88rem}.article-content h2{font-size:1.8rem;line-height:1.92rem}.article-content h3{line-height:1.92rem;font-size:1.2rem}body,ol,p,pre,ul{font-size:1.2rem;line-height:1.6}.article-content h2,.article-content h3,.article-title,h1,h2,h3,ol,p,pre,ul{margin-bottom:1.632rem}}th{font-weight:600}td,th{border-bottom:1px solid #595959;overflow:auto;padding:.75em;text-align:left;vertical-align:top}thead th{border-bottom:1px solid #f9c412}table{display:block;max-width:-moz-fit-content;max-width:fit-content;white-space:nowrap}code,pre,table{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){padding:1.5em;overflow-x:scroll}code{border-radius:.3em;color:#e2777a;padding:0 .1em;font-size:90%;background:#2d2d2d;font-family:"Source Code Pro",monospace;background:0 0;color:var(--code)}body,h1,h2,h3{font-family:var(--font-family)}a:hover{text-decoration:underline}button,input{border-radius:.3em;max-width:100%}input{padding:.75em;margin-bottom:1.5em;display:inline}button+input[type=checkbox],button+label,input+input[type=checkbox],input+label,label+*{page-break-before:always}button,label{display:inline-block}button{background:#f2f2f2;color:#191919;cursor:pointer;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--btn-primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--btn-primary)}input[type=color],input[type=datetime],input[type=email],input[type=time],input[type=url]{border:1px solid #595959;padding:.75em}input[type=checkbox]{flex-grow:0;margin:.75em .375em .75em 0;vertical-align:middle}input[type=checkbox]+label{page-break-before:avoid}*{border:0;box-sizing:border-box}section{margin-left:auto;margin-right:auto}header label{display:block}header{padding:4.5em 1.5em 1.25em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ol,ul{margin-top:0}@media (min-width:600px){header{padding:4.5em 1.5em 3em}header nav{padding:.375em 1.5em}}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left;display:flex}header nav h1 img{width:1.3em;height:auto;margin-right:.2em}header nav h1 img+a{font-weight:700;font-size:1.1em}header nav a{font-weight:400;text-decoration:none;font-family:var(--font-family);color:#181818;margin-left:1.5em;color:var(--text)}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}header nav label{color:#000;cursor:pointer;margin:0;font-style:normal;text-align:right}main{max-width:70rem;margin:0 auto;border-top:.5px solid var(--background)}footer{background:rgba(0,0,0,.8);color:#fff;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:.8em}footer span{font-size:.75em;color:var(--desc)}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ol,li ul{margin-bottom:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]{padding:0}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment{color:#999}.token.punctuation{color:#ccc}.token.tag{color:#e2777a}.token.function{color:#f08d49}.token.class-name,.token.property{color:#f8c555}.token.keyword{color:#cc99cd}.token.regex,.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.inserted{color:green}body,footer,header nav{background:var(--background);color:var(--text)}aside{color:var(--text)}.nav-menu{float:right}#nav-toggle,#switch-to-light,.light-mode #switch-to-light,.nav-menu>a{display:none}.nav-links{position:fixed;width:100%;height:100%;background-color:var(--full-screen);top:-100%;left:0;right:0;bottom:0;overflow:hidden;transition:all .3s ease-in-out;transform:scale(0);display:flex;flex-direction:column;padding:3em;text-align:left}#nav-toggle+.hamburger-icon+.nav-links a,#nav-toggle+.hamburger-icon+.nav-links button{margin-left:0;margin-right:0;color:var(--text);font-size:1.25em;margin-top:1em;padding:0;background:0 0;text-align:left}.hamburger-icon{position:absolute;right:5px;margin-top:-2px;width:1.5em;z-index:10}.hamburger-icon div{position:relative;width:1.5em;height:3px;border-radius:3px;background-color:var(--highlight);margin-top:5px;transition:all .3s ease-in-out}#nav-toggle:checked+.hamburger-icon .hamburger-icon-top{transform:rotate(-45deg);margin-top:15px}#nav-toggle:checked+.hamburger-icon .hamburger-icon-bottom{opacity:0;transform:rotate(45deg)}#nav-toggle:checked+.hamburger-icon .hamburger-icon-center{transform:rotate(45deg);margin-top:-3px}#nav-toggle:checked+.hamburger-icon+.nav-links{top:0;transform:scale(1)}.dark-mode #switch-to-light{display:initial}#switch-to-dark,.dark-mode #switch-to-dark{display:none}.light-mode #switch-to-dark{display:initial}#switch-color-theme{display:none;background:0 0;background-repeat:no-repeat;background-position:center;vertical-align:sub;padding:0;margin:0;width:1.25em;height:1.25em}#switch-color-theme,.light-mode #switch-color-theme{background-image:url(/img/icons/dark-mode.svg)}.dark-mode #switch-color-theme{background-image:url(/img/icons/light-mode.svg)}@media (min-width:600px){.nav-menu>a{display:initial}#nav-toggle+.hamburger-icon,#nav-toggle+.hamburger-icon+.nav-links{display:none}#switch-color-theme{display:inline-block}}.article-header{padding-bottom:1.5em;padding-top:2.75em}.article-content{padding-top:0}.article-image{aspect-ratio:2/1;max-width:100vw}.article-info,.article-title{width:100%;text-align:left}.article-info{color:var(--border);margin-top:-1em}@media (min-width:600px){.article-header{padding-top:4.5em}.article-image{max-width:100%}.article-info{margin-top:-1.1em}}.article-bottom{display:flex;justify-content:space-between;margin-top:3em;flex-wrap:wrap}.article-sharing{text-align:right;white-space:nowrap}.article-author{display:flex;padding:1.5em 0;margin:1em 0;border-top:solid 1px var(--border);border-bottom:solid 1px var(--border)}.article-author-avatar,.article-author-avatar img{width:5em;min-width:100px;height:5em;min-height:100px}.article-author-avatar img{border-radius:100%}.article-author-info{display:flex;flex-direction:column;justify-content:space-evenly;margin-left:1em}.article-author-name{font-weight:500}.article-tags-list{display:flex;flex-wrap:wrap;list-style:none;margin:0;padding:0}.tag a{display:inline-flex;background:var(--anchor);color:var(--tag);margin-bottom:.5em;margin-right:.5em;font-size:.8rem;height:2em;line-height:2em;justify-content:center;align-items:center;white-space:nowrap;border-radius:5px;overflow:hidden}.tag a:hover{text-decoration:none}.article-tags-list .tag a{padding-left:.75em;padding-right:.75em}</style></head><body><script csp-hash="sha256-zpxrDd8T0qz3kBmsPk4N2Yljt/cI4nQpWytE1zmmtrk=" data-cfasync="false">(() => {
        let isDark = localStorage.getItem('isDarkTheme');
        isDark = isDark === null ? window.matchMedia("(prefers-color-scheme: dark)").matches: (isDark === 'true');
        document.body.setAttribute("class", isDark ? "dark-mode": "light-mode");
        localStorage.setItem('isDarkTheme', isDark ? true: false);
      })();</script><header class="article-header"><nav><div id="nav"><h1><img alt="Fran logo" height="192" src="/favicon.svg" width="192"> <a href="/" title="Homepage">Frannn.dev</a></h1><div class="nav-menu"><a href="/archives/">Archives</a> <a href="/tags/">Tags</a> <a href="/about/">About</a> <button aria-label="switch color mode" id="switch-color-theme"></button> <input id="nav-toggle" type="checkbox"> <label class="hamburger-icon" for="nav-toggle"><div class="hamburger-icon-top"></div><div class="hamburger-icon-center"></div><div class="hamburger-icon-bottom"></div></label><div class="nav-links"><a href="/archives/">Archives</a> <a href="/tags/">Tags</a> <a href="/about/">About</a> <button aria-label="switch to light mode" id="switch-to-light">Light Mode</button> <button aria-label="switch to dark mode" id="switch-to-dark">Dark Mode</button></div></div></div><div id="reading-progress" aria-hidden="true"></div></nav><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1sRfHV-1920w.avif 1920w, /img/remote/1sRfHV-1280w.avif 1280w, /img/remote/1sRfHV-640w.avif 640w, /img/remote/1sRfHV-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1sRfHV-1920w.webp 1920w, /img/remote/1sRfHV-1280w.webp 1280w, /img/remote/1sRfHV-640w.webp 640w, /img/remote/1sRfHV-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1sRfHV-1920w.jpg 1920w, /img/remote/1sRfHV-1280w.jpg 1280w, /img/remote/1sRfHV-640w.jpg 640w, /img/remote/1sRfHV-320w.jpg 320w" type="image/jpeg"><img alt="正則表達式 Regular Expression 與深入應用" height="640" src="/img/remote/1sRfHV-1920w.jpg" width="1280" decoding="sync" loading="eager" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1280 600'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAIAAAAcxIEBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApUlEQVQImRXKywqCQBQA0PmmFgU54713xnJ8QaKphUoFRlmpUVQi0a7vjs76MGVp7fpBEC7CKIpiz7Vdm3ytilVWV82j+zIp547juZ7v+YHj6LzI++cwvN7tuS3XOykkM4GQZJJm58v1du/7/tM2XRpH2iJjMpqOR6wot/WpqfaHY33Jiw2CIDAsEjPiFnGFxn/EywQAAUwhDERTIijkCrkETub0Bw8DND+agDGNAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" class="article-image"></picture><h1 class="article-title">正則表達式 Regular Expression 與深入應用</h1><aside class="article-info"><time datetime="2018-06-20">Jun 20th, 2018.</time> 2 mins read</aside><dialog id="message"></dialog></header><main><article class="article-content"><h2 id="%E5%89%8D%E8%A8%80">前言 <a href="#%E5%89%8D%E8%A8%80" class="direct-link">#</a></h2><p>在資料驗證時，常常必須進行字串比對的工作，我們能藉由 <strong>正則表達式（Regular Expression）</strong> 來判斷是否字串具有符合的格式。</p><p>善用<strong>正則表達式</strong>能幫助我們用更加簡潔的程式碼去驗證字串，再利用 String 中的 <code>match()</code> 或 <code>replace()</code> 等方法對字串做更進一步的處理。</p><h2 id="%E5%BB%BA%E7%AB%8B%E6%AD%A3%E5%89%87%E8%A1%A8%E9%81%94%E5%BC%8F">建立正則表達式 <a href="#%E5%BB%BA%E7%AB%8B%E6%AD%A3%E5%89%87%E8%A1%A8%E9%81%94%E5%BC%8F" class="direct-link">#</a></h2><p>在 JavaScript 中，我們有兩種方式可以建立正則表達式：</p><ul><li>建立字面值</li></ul><pre class="language-javascript"><code class="language-javascript">    <span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">JavaScript</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span></code></pre><ul><li>建立 RegExp 物件</li></ul><pre class="language-javascript"><code class="language-javascript">    <span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'JavaScript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果是不變的值，使用字面值來建立會具有較好的效能。</p><h2 id="%E6%AD%A3%E5%89%87%E8%A1%A8%E9%81%94%E5%BC%8F%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E5%85%83">正則表達式中的特殊字元 <a href="#%E6%AD%A3%E5%89%87%E8%A1%A8%E9%81%94%E5%BC%8F%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E5%85%83" class="direct-link">#</a></h2><p>正則表達式由數個簡易字元組成，下面列出在正則表達式中個人比較常利用的特殊字元。</p><h3 id="%E4%B8%80%E8%88%AC%E5%B8%B8%E8%A6%8B">一般常見 <a href="#%E4%B8%80%E8%88%AC%E5%B8%B8%E8%A6%8B" class="direct-link">#</a></h3><ul><li><code>\</code>：跳脫特殊字元（如 <code>\.</code> 找 "." 或是 <code>\/</code> 找 "/"）</li><li><code>.</code>：任意字元</li><li><code>^</code>：字元的開頭</li><li><code>$</code>：字元的結尾</li><li><code>[abc]</code> ：比對是否為中括號中的 a 或 b 或 c</li><li><code>[^abc]</code>：不是中括號中的 a 或 b 或 c 的任何字元</li><li><code>[a-z]</code> ：抓任何小寫 a-z 之間的字元</li><li><code>[a-zA-Z]</code> ：抓任何小寫 a-z 和大寫 A-Z 之間字元</li><li><code>[0-9]</code>：數字字元</li><li><code>|</code>：OR</li><li><code>()</code>：群組</li></ul><h3 id="%E6%8C%87%E5%AE%9A%E5%8C%B9%E9%85%8D%E5%AD%97%E5%85%83">指定匹配字元 <a href="#%E6%8C%87%E5%AE%9A%E5%8C%B9%E9%85%8D%E5%AD%97%E5%85%83" class="direct-link">#</a></h3><p>前面我們曾提及一種特殊字元，也就是反斜線。<br>反斜線 <code>\</code> 在前可表示<strong>轉義</strong> (escaping) ，將其後的特殊字元視為一般字元。<br>如果要表示的字串中含有 <code>/</code> 字元時，就必須寫作 <code>/\//</code>。</p><p>但別把跳脫字元和下面這類型的特殊字元混淆了。</p><ul><li><code>\d</code>：匹配任何數字字元</li><li><code>\D</code>：匹配任何不是數字字元</li><li><code>\w</code> ：匹配所有文字字元 + 底線，其實等於 <code>[a-z\dA-Z_]</code></li><li><code>\W</code>：匹配所有非文字字元（標點符號、特殊字元等）</li><li><code>\s</code>：匹配空格字元</li><li><code>\S</code>：匹配任何<strong>非空格字元</strong></li><li><code>\b</code>：在邊界的字元, 如 <code>hello</code> 會得到 ["h", "o"]</li></ul><h3 id="%E6%8C%87%E5%AE%9A%E5%8C%B9%E9%85%8D%E6%AC%A1%E6%95%B8">指定匹配次數 <a href="#%E6%8C%87%E5%AE%9A%E5%8C%B9%E9%85%8D%E6%AC%A1%E6%95%B8" class="direct-link">#</a></h3><p>以下字元<strong>只會針對前一個位置的匹配規則作用</strong></p><ul><li><code>*</code>：0 或更多</li><li><code>+</code>：1 或更多</li><li><code>?</code>：0 或 1 次</li><li><code>{m}</code>：m 次</li><li><code>{n,}</code>：最少 n 次</li><li><code>{m,n}</code>：m 到 n 次</li><li><code>{m, n}?</code>：從 m 號到 n 次，取匹配最少次的</li></ul><h3 id="flags-%E6%97%97%E6%A8%99">flags 旗標 <a href="#flags-%E6%97%97%E6%A8%99" class="direct-link">#</a></h3><p>正則表達式可以設定不同的甚至是多個 <strong>flag</strong> 來改變預設規則。</p><ul><li><code>/.../i</code>：不區分大小寫</li><li><code>/.../g</code>：<strong>全局匹配模式</strong>，得以重複匹配多次，否則預設固定回傳第一個結果</li></ul><h2 id="%E5%AF%A6%E9%9A%9B%E6%92%B0%E5%AF%AB%E6%AD%A3%E5%89%87%E8%A1%A8%E9%81%94%E5%BC%8F">實際撰寫正則表達式 <a href="#%E5%AF%A6%E9%9A%9B%E6%92%B0%E5%AF%AB%E6%AD%A3%E5%89%87%E8%A1%A8%E9%81%94%E5%BC%8F" class="direct-link">#</a></h2><p>下面以幾個例子說明該如何撰寫正則表達式。</p><h3 id="%E7%AF%84%E4%BE%8B%E4%B8%80%EF%BC%9A%E6%89%8B%E6%A9%9F%E8%99%9F%E7%A2%BC">範例一：手機號碼 <a href="#%E7%AF%84%E4%BE%8B%E4%B8%80%EF%BC%9A%E6%89%8B%E6%A9%9F%E8%99%9F%E7%A2%BC" class="direct-link">#</a></h3><ul><li>撰寫思維：判斷是不是十位數數字所組成</li><li>正則表達式：<code>[0-9]{10}</code></li></ul><h3 id="%E7%AF%84%E4%BE%8B%E4%BA%8C%EF%BC%9Aemail">範例二：email <a href="#%E7%AF%84%E4%BE%8B%E4%BA%8C%EF%BC%9Aemail" class="direct-link">#</a></h3><ul><li>撰寫思維：以 <code>@</code> 為中點，可以把字串切分成前半部和後半部<ul><li>前半部以任意文字字元和 <code>-</code> 組成任意長度</li><li>後半部以任意文字字元和 <code>.</code> 組成任意長度</li></ul></li><li>正則表達式：<ol><li>先以 <code>[\w\-]</code> 表達任意文字字元或 <code>-</code> 的字元</li><li>加上加號 <code>[\w\-]+</code> 取取符合規則的一個或多個字元</li><li>後半部如法炮製出 <code>[\w\-].</code></li><li>最後加上中間的 <code>@</code> 並以括號包成群組，得到 <code>([\w\-]+@[\w\.]+)</code></li></ol></li></ul><h3 id="%E7%AF%84%E4%BE%8B%E4%B8%89%EF%BC%9A%E4%B8%8D%E7%A2%BA%E5%AE%9A%E5%A6%82%E4%BD%95%E5%88%86%E9%9A%94%E7%9A%84%E6%89%8B%E6%A9%9F%E8%99%9F%E7%A2%BC">範例三：不確定如何分隔的手機號碼 <a href="#%E7%AF%84%E4%BE%8B%E4%B8%89%EF%BC%9A%E4%B8%8D%E7%A2%BA%E5%AE%9A%E5%A6%82%E4%BD%95%E5%88%86%E9%9A%94%E7%9A%84%E6%89%8B%E6%A9%9F%E8%99%9F%E7%A2%BC" class="direct-link">#</a></h3><ul><li>撰寫思維：手機號碼可能以分隔線 <code>-</code> 或是空白字元分隔<br>一樣先拆成三個部分，各自檢查是否符合規則</li><li>正則表達式：<ol><li>先以 <code>\d{4}</code> 表達四位數字字元如 <code>0912</code></li><li>後面可能用空格或是 <code>-</code> 隔開，所以變成 <code>\d{4}[\s\-]?</code></li><li>如法炮製其他部分，得到 <code>\d{4}[\s\-]?\d{3}[\s\-]?\d{3}</code></li></ol></li></ul><h3 id="%E5%85%B6%E4%BB%96%E5%B8%B8%E8%A6%8B%E5%AF%A6%E4%BE%8B">其他常見實例 <a href="#%E5%85%B6%E4%BB%96%E5%B8%B8%E8%A6%8B%E5%AF%A6%E4%BE%8B" class="direct-link">#</a></h3><p>以下實例會以字面值，也就是兩個 <code>/</code> 包裹字元的形式來表示。</p><table><thead><tr><th>RegExp</th><th>說明</th><th>範例</th></tr></thead><tbody><tr><td><code>/^\d{4}-\d{2}-\d{2}$/</code></td><td>西元生日格式</td><td>"1996-08-06"</td></tr><tr><td><code>/^[A-Z]\d{9}$/</code></td><td>身分證字號</td><td>"A123456789"</td></tr><tr><td><code>/^09\d{8}$/</code></td><td>手機號碼</td><td>"0912345678"</td></tr><tr><td><code>/^[^aeiou]*$/</code></td><td>不包含小寫母音的字串</td><td>"hEllO","ApplE"</td></tr><tr><td><code>/^.*@gmail\.com$/</code></td><td>gmail 信箱</td><td>"<a href="mailto:test@gmail.com">test@gmail.com</a>"</td></tr><tr><td><code>/^[0-9\+\-\*\/]*$/</code></td><td>四則運算算式</td><td>"1+2*3"</td></tr></tbody></table><h2 id="%E5%AF%A6%E9%9A%9B%E6%87%89%E7%94%A8">實際應用 <a href="#%E5%AF%A6%E9%9A%9B%E6%87%89%E7%94%A8" class="direct-link">#</a></h2><p>接下來介紹一些常用的方法，如 RegExp 的 <code>test()</code> 和 <code>exec()</code> 方法，或是 String 的 <code>match()</code> 和 <code>replace()</code> 方法。</p><p>這些只是個人比較常用到的，實際上還有其他可搭配應用的方法，有興趣可以再參閱其他技術文件。</p><h3 id="regexp.prototype.test()">RegExp.prototype.test() <a href="#regexp.prototype.test()" class="direct-link">#</a></h3><p>語法形如 <code>regexObj.test(str)</code><br>對正則表達式檢查某個字串是否匹配其規則，並回傳 <code>true</code> 或 <code>false</code>。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> result1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">han</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'hannah1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><br><br><span class="token keyword">var</span> result2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">nan</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'hannah1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre><h3 id="regexp.prototype.exec()">RegExp.prototype.exec() <a href="#regexp.prototype.exec()" class="direct-link">#</a></h3><p>語法形如 <code>regexObj.exec(str)</code><br>對正則表達式連續檢查字串的匹配結果，回傳符合結果的陣列或是 <code>null</code>。</p><p>每次執行會把成功匹配的末位紀錄在 <code>regexObj.lastIndex</code> 中，做為下一次匹配開始的位置。並且可搭配<strong>全局匹配模式</strong>和 <code>()</code> <strong>群組</strong>的特殊字元來使用，能得到更進一步分組的結果陣列。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">(foo)([\w]+)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><br><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'table football, foosball'</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> array<span class="token punctuation">;</span><br><br><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>array <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> re<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token comment">// Array ["football", "foo", "tball"] 14</span><br><span class="token comment">// Array ["foosball", "foo", "sball"] 24</span></code></pre><p>以第一次 <code>console.log</code> 的結果陣列 <code>array</code> 為例，這個結果陣列會有以下屬性：</p><table><thead><tr><th>屬性</th><th>說明</th><th>實例</th></tr></thead><tbody><tr><td>[0]</td><td>匹配的全部字串</td><td>"football"</td></tr><tr><td>[1], ..., [n]</td><td>括號中的分組匹配字串</td><td>[1] = "foo"<br>[2] = "tball"</td></tr><tr><td>index</td><td>匹配到的字串起點位於原始字串的索引值</td><td>6</td></tr><tr><td>input</td><td>原始字串值</td><td>"table football, foosball"</td></tr></tbody></table><h3 id="string.prototype.match()">String.prototype.match() <a href="#string.prototype.match()" class="direct-link">#</a></h3><p>語法形如 <code>str.match(regexp)</code></p><p>對一個字串判斷是否符合正則表達式的結果，會回傳匹配字串或 <code>null</code>。<br>如果是<strong>全局匹配模式</strong>，則會回傳匹配字串之結果陣列。此結果陣列的格式與 <code>RegExp.prototype.exec()</code> 相同。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">[ABC]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span><br><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["A", "B", "C", "a", "b", "c"]</span><br><br><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">[\d]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span><br><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [""]</span></code></pre><h3 id="string.prototype.replace()">String.prototype.replace() <a href="#string.prototype.replace()" class="direct-link">#</a></h3><p>語法形如 <code>str.replace(regexp|substr, newSubstr|function)</code></p><p>對一個字串與 <code>pattern</code> 比對，這個 <code>pattern</code> 可以是字串也可以是正則表達式，再以 <code>replacement</code> 取代吻合處，此處的 <code>replacement</code> 則可以是字串或函式。<br>並且可搭配<strong>群組</strong>的特殊字元來使用，能指定一個字串為參數，形如 <code>$n</code>，代表第 <code>n</code> 項的分組匹配字串。</p><p>必須注意的是，<strong><code>replace()</code> 方法並不會改變原有字串</strong>。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'We wish you a merry xmas! We wish you a merry xmas!'</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">xmas</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span> <span class="token string">'Christmas'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// We wish you a merry Christmas! We wish you a merry xmas!</span><br><br><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'John Smith'</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">(\w+)\s(\w+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'$2, $1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Smith, John</span></code></pre><h2 id="%E7%B5%90%E8%AA%9E">結語 <a href="#%E7%B5%90%E8%AA%9E" class="direct-link">#</a></h2><p>字串比對和資料驗證等問題算是很容易接觸到的狀況，利用正則表達式我們就能夠更簡單去驗證其格式的正確性。</p><p>初次接觸確實會讓人覺得簡直像是無字天書，但實際搞懂每個特殊字元的對應意義，日後無論是要自己撰寫規則還是檢閱他人的驗證規則，其實也不是這麼困難的事。</p><section class="article-bottom"><ul class="article-tags-list"><li class="tag"><a href="/tags/javascript/">#JavaScript</a></li><li class="tag"><a href="/tags/regexp/">#RegExp</a></li></ul><div class="article-sharing"><a href="https://frannn.dev/posts/f1f89997/" on-click="share">分享文章</a></div></section><section class="article-author"><div class="article-author-avatar"><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/avatar-1920w.avif 1920w, /img/avatar-1280w.avif 1280w, /img/avatar-640w.avif 640w, /img/avatar-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/avatar-1920w.webp 1920w, /img/avatar-1280w.webp 1280w, /img/avatar-640w.webp 640w, /img/avatar-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/avatar-1920w.jpg 1920w, /img/avatar-1280w.jpg 1280w, /img/avatar-640w.jpg 640w, /img/avatar-320w.jpg 320w" type="image/jpeg"><img alt="metadata.author.name" height="300" src="/img/avatar-1920w.jpg" width="300" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 300 300'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAACXBIWXMAACdfAAAnXwEdhrpqAAAA00lEQVQImQHIADf/AP7PTP/STPXGRsyWOK52MM6aOf7QS//QTAD+z0v/1U+ddTltOid1PCNyOiO5iDj/1U0A/9dP2KY+eEEqglE1hlE0cjkehVgw/M9NAP/VSuazPKBwRM6vnbKObphfRcuJP//PRAD+zmb/1UzywX756+3/69m2vK6Nw4nozloA2MTB1MOqv7iu2snI6NrV29zTQrS8V8LBALy9vsLCx8XHybzAwMC/vqTOzF7Bw0jDyACqsbHJyMfKysrEw8K8u7pauLxDwMUWsrRe7njNgLLmvgAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></div><div class="article-author-info"><div class="article-author-name"><a href="/about/">Fran</a></div><div class="article-author-desc">一隻野生的前端工程師。相信每一行程式碼都是改變世界的力量。</div></div></section><section class="article-comment"><script csp-hash="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" crossorigin="anonymous" data-category="Comments" data-category-id="DIC_kwDOHQSdIc4CQfRB" data-emit-metadata="0" data-input-position="top" data-lang="zh-TW" data-loading="lazy" data-mapping="title" data-reactions-enabled="1" data-repo="frantw/eleventy-high-performance-blog" data-repo-id="R_kgDOHQSdIQ" data-strict="0" data-theme="dark_dimmed" defer="" src="https://giscus.app/client.js"></script></section><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"正則表達式 Regular Expression 與深入應用","image":["https://frannn.dev/img/avatar-1920w.jpg"],"author":"Fran","genre":"Insert a schema.org genre","publisher":{"@type":"Organization","name":"Fran","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-192x192.png?hash=b365a9bb9c"}},"url":"https://frannn.dev/posts/f1f89997/","mainEntityOfPage":"https://frannn.dev/posts/f1f89997/","datePublished":"2018-06-20","dateModified":"2022-08-24","description":"前言 # 在資料驗證時，常常必須進行字串比對的工作，我們能藉由 正則表達式（Regular Expression） 來判斷是否字串具有符合的格式。 善用正則表達式能幫助我們用更加簡潔的程式碼去驗證字串，再利用 String 中的 match() 或 replace()..."}</script></article></main><footer><p>© 2017-2022 Fran<br><span>Based on <a href="https://github.com/google/eleventy-high-performance-blog" rel="noopener" target="_blank">eleventy-high-performance-blog</a><span></span></span></p></footer></body></html>